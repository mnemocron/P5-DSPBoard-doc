\section{Einleitung}
\label{sec:Einleitung}

Ein Amateurfunker hat während des Funkbetriebs immer wieder mit verschiedenen Störgeräuschen zu kämpfen die die Verständlichkeit der Verbindung erheblich beeinflussen. Genauso ist es für einen Hobbymusiker mühsam 19-Zoll Racks mit analogen Effekt-Geräten von Gig zu Gig zu schleppen, wenn er seine Musik nur mit ein paar simplen Audioeffekten versetzen möchte. In beiden Bereichen fehlt auch meistens das Budget und der Platz für teures analoges Equipment.\\
Hier bietet sich ein perfektes Anwendungsgebiet für digitale Signalverarbeitung. Jedoch sind auch handelsübliche digitale Effektgeräte meist nur für sehr spezifische Anwendungen konzipiert und kommen selten wirklich handlich daher.

Deswegen ist es das Ziel in diesem Projekt eine handliche DSP Einheit zu entwerfen, die mit einem schnellen modernen Microcontroller geeignete Effekte rechnen kann. Im Gegensatz zum Vorgängerprojekt, das mit einem dsPIC33 ausgestattet war und bis anhin im MicroCom Labor eingesetzt wurde, wird das neue Board mit einem ARM Cortex M4 Prozessor bestückt welcher dank seiner Floating-Point-Unit eine schnellere Verarbeitung von Signalen ermöglicht. Für die AD/DA-Wandlung sorgt ein TLV320 Codec um die Audio-Signale zuverlässig hin und her zu wandeln.

Die Vorteile einer Lösung  mittels Microcontroller sind so zahlreich wie offensichtlich. Dank der Vielseitigkeit der digitalen Signalverarbeitung können je nach Bedarf beliebige Effekte programmiert und auf das Board geflasht werden \footnote{In diesem Projekt ist es das Ziel die Hardware zu entwerfen und die Software soweit vorzubereiten, dass ein einfaches Audio-In/Audio-Out möglich ist. In einem späteren Projekt erst soll ein Tool entwickelt werden, welches die entsprechenden Effekte berechnet und aufs Board lädt.}. Der Prozessor inkl. Codec plus der Audio- und Kommunikations-Schnittstellen brauchen weder viel Platz, noch sind sie teuer. Die derzeitige Lösung ist auf einem 7x10cm PCB mit einem Budget-Rahmen von 50SFr realisiert worden. Ein DSP-Board mittels Microcontroller ist also die perfekte Lösung für Hobby-Anwendungen im Bereich Funk oder Musik.
\todo{nicht Budget-Rahmen: mit einem Materialkostenanteil von 50 CHF pro Board}

Da die Bedienelemente mit je zwei Tasten, zwei Rotary Encoders und zwei 1.96 Inch Displays eher minimalistisch gehalten sind, können mehere DSP-Boards beliebig kaskadiert werden. Wie bei einem Puzzleteil werden die Boards ineinandergesteckt und über einen analogen Audio-Stecker wird das Signal von Board zu Board weitergeschlauft und weiterverarbeitet. So bleibt das System modular und kann für beliebige Anwendungen eingesetzt werden.

Das erarbeitete DSP-Board funktioniert erwartungsgemäss. Es ist möglich ein Audio-Signal einzuspeisen welches nach erfolgreicher AD/DA-Wandlung wieder am Audio-Ausgang anliegt. Die verschiedenen Ein-/Ausgänge sowie deren Pegel sind anwählbar über ein einfaches Menu. Zusätzlich wurde sogar ein FIR-Filter mit verstellbarer Grenzfrequenz implementiert.

%Kleine Fehler in der Analog-Schaltung haben sich eingeschlichen welche Verbesserungspotential bieten, jedoch keinen entscheidenden Einfluss auf die Funktion haben.

Die folgende Facharbeit ist in Analyse/Konzept, Hardware, Software, Validierung und Status/Verbesserungen unterteilt. Erst wird das angedachte Konzept grob erklärt und dessen Funktionsweise erläutert, wonach detailliert auf die Umsetzung in den Teilen Hardware und Software eingegangen wird. In den letzten beiden Kapiteln werden Teilsysteme mit entsprechenden Messungen auf ihre Genauigkeit und Funktionalität untersucht und zum Schluss der momentane Status und mögliche Verbesserungen für weiterführende Projekte dargelegt.

%Das derzeit verwendete DSP Board für den Unterricht im MicroCom Labor basiert auf einem dsPIC33 mit Fixed-Point-Recheneinheit. Die neuen ARM Prozessoren bieten ab der Cortex-M4 Serie eine Floating-Point-Unit (FPU) und ermöglichen dadurch eine schnellere Verarbeitung von Signalen. \\
%
%Aus diesem Grund wird die Hardware des DSP Boards überarbeitet und soll mit einem ARM Cortex-M4 Microcontroller ausgestattet werden. Der Schaltungsaufwand beschränkt sich auf die wesentlichen Funktionen. Diese beinhalten die MCU, einen Codec für die AD/DA Wandlung, die Audio-Steckverbinder und die Bedienelemente des HMI. \\
%
%Im Bereich Amateurfunk und Hobbymusik besteht oft ein Bedürfnis nach einer einfachen Möglichkeit, ein Audiosignal mit einem Effekt zu verändern.
%So kann es sein, dass ein Amateurfunker mit einem Notch-Filter einen Störton unterdrücken möchte. Als Musiker möchte man mit einer Effektbox einen Reverbeffekt erzeugen.
%Effektgeräte und Filter am Markt sind oft zu einem Premiumpreis erhältlich.
%Dieses Projekt hat zum Ziel, eine günstige Alternative zu diesen Geräten zu bieten.
%
%
%Heute bieten die DSP Funktionen in der ARM Cortex-M4 Architektur einegünstige Möglichkeit Signalverarbeitung auf Microcontrollerebene zu betreiben. 
%Der Rahmen dieses Projektes umfasst die Entwicklung der Hard- und Firmware eines DSP Boards mit ARM Cortex-M4 Microcontroller. 
%Das Gerät wird mit Bedienelementen wie 2 Dreh
